webpackJsonp([3],{"+14I":function(e,t,a){var n=a("eX7x");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("0cda689e",n,!0,{})},eX7x:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"\n.mainbox[data-v-7be32f36] {\n  background-color: #fff;\n}\n.checkboxgroup[data-v-7be32f36] {\n  display: inline-block;\n  width: 40%;\n  vertical-align: top;\n  margin-top: 50px;\n}\n.checkbox[data-v-7be32f36] {\n  display: block;\n}\n",""])},vgyy:function(e,t,a){"use strict";function n(e){a("+14I")}Object.defineProperty(t,"__esModule",{value:!0});var i=a("r4Fr"),o=a("N28j"),s={data:function(){return{roleList:[],interfaceList:[],addVisible:!1,modVisible:!1,addRolename:"",modRolename:"",roleId:[],addInterface:[],whatIsHisMenu:[],whatIsHisInterface:[],checked:[],currentPage:Number(this.$route.query.pageNum)||1,pageSize:1,modulars:o.a}},methods:{modularFilter:function(e){var t=[],a=[];t=e.split(",").map(Number);this.modulars.forEach(function(e){e.children.forEach(function(n){if(-1===t.indexOf(n.id))return!1;-1===a.indexOf(e.label)&&a.push(e.label)})});return a.join(",")},addOpen:function(){this.addVisible=!0},addClose:function(){this.addVisible=!1},addAccept:function(){var e=this;this.whatIsHisMenu=this.$refs.addTree.getCheckedKeys(!0).join(","),this.whatIsHisInterface=String(this.addInterface),console.log(this.whatIsHisInterface);var t={roleName:this.addRolename,modulars:String(this.whatIsHisMenu),interfaceIds:this.whatIsHisInterface};i.a.addRole(t).then(function(t){e.addVisible=!1,e.getData()})},modOpen:function(e){var t=this;this.modVisible=!0,this.whatIsHisMenu=[],this.whatIsHisInterface=[],this.roleId=e.roleId,e?(this.whatIsHisMenu=e.modulars.split(",").map(Number),console.log(this.whatIsHisMenu),this.$nextTick(function(){t.$refs.modTree.setCheckedKeys(t.whatIsHisMenu)}),this.whatIsHisInterface=e.interfaceIds,this.modRolename=e.roleName):this.$nextTick(function(){t.$refs.modTree.setCheckedKeys(t.whatIsHisMenu)})},modClose:function(){this.modVisible=!1},modAccept:function(){var e=this;this.whatIsHisMenu=this.$refs.modTree.getCheckedKeys(!0).join(","),this.whatIsHisInterface=String(this.whatIsHisInterface);var t={roleName:this.modRolename,roleId:this.roleId,modulars:this.whatIsHisMenu,interfaceIds:this.whatIsHisInterface};i.a.modRole(t),this.modVisible=!1,this.$nextTick(function(){e.getData()})},del:function(e){var t=this,a={roleId:Number(e.roleId)};i.a.delRole(a).then(function(e){return console.log(e)}),this.$nextTick(function(){t.getData()})},getData:function(){var e=this,t={pageNum:this.currentPage};i.a.getInterface().then(function(t){e.interfaceList=t.data}),i.a.getRolelist(t).then(function(t){e.roleList=t.data.list,e.pageSize=t.data.totalPage,e.$router.replace({query:{pageNum:e.currentPage}})})},reflash:function(){this.getData()},test:function(){}},created:function(){this.getData()}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mainbox"},[a("span",[e._v("角色列表")]),e._v(" "),a("el-button",{on:{click:function(t){return e.addOpen(0)}}},[e._v("新增")]),e._v(" "),a("el-button",{on:{click:e.reflash}},[e._v("刷新")]),e._v(" "),a("el-button",{on:{click:e.test}},[e._v("测试")]),e._v(" "),a("el-table",{attrs:{data:e.roleList}},[a("el-table-column",{attrs:{label:"编号",prop:"roleId",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{label:"用户名",prop:"roleName",width:"200px"}}),e._v(" "),a("el-table-column",{attrs:{label:"模块权限"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.modularFilter(t.row.modulars)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.createTime)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.modOpen(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.del(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.addVisible,center:"",title:"新增",width:"80%"},on:{"update:visible":function(t){e.addVisible=t}}},[a("div",[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.addRolename,callback:function(t){e.addRolename=t},expression:"addRolename"}}),e._v(" "),a("div",{staticClass:"checkboxgroup"},[a("span",[e._v("页面权限")]),e._v(" "),a("el-tree",{ref:"addTree",attrs:{data:e.modulars,"node-key":"id","show-checkbox":""}})],1),e._v(" "),a("div",{staticClass:"checkboxgroup"},[a("span",[e._v("接口权限")]),e._v(" "),a("el-checkbox-group",{model:{value:e.addInterface,callback:function(t){e.addInterface=t},expression:"addInterface"}},e._l(e.interfaceList,function(t){return a("el-checkbox",{key:t.interfaceId,staticClass:"checkbox",attrs:{label:t.interfaceId}},[e._v(e._s(t.remark))])}),1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.addClose()}}},[e._v("关闭")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addAccept()}}},[e._v("确认")])],1)]),e._v(" "),a("el-dialog",{attrs:{visible:e.modVisible,center:"",title:"编辑",width:"80%"},on:{"update:visible":function(t){e.modVisible=t}}},[a("div",[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.modRolename,callback:function(t){e.modRolename=t},expression:"modRolename"}}),e._v(" "),a("div",{staticClass:"checkboxgroup"},[a("span",[e._v("页面权限")]),e._v(" "),a("el-tree",{ref:"modTree",attrs:{data:e.modulars,"node-key":"id","show-checkbox":""}})],1),e._v(" "),a("div",{staticClass:"checkboxgroup"},[a("span",[e._v("接口权限")]),e._v(" "),a("el-checkbox-group",{model:{value:e.whatIsHisInterface,callback:function(t){e.whatIsHisInterface=t},expression:"whatIsHisInterface"}},e._l(e.interfaceList,function(t){return a("el-checkbox",{key:t.interfaceId,staticClass:"checkbox",attrs:{label:t.interfaceId}},[e._v(e._s(t.remark))])}),1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.modClose}},[e._v("关闭")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.modAccept()}}},[e._v("确认")])],1)]),e._v(" "),0!=e.roleList.length?a("el-pagination",{attrs:{"current-page":e.currentPage,"page-count":e.pageSize,background:"",layout:"prev, pager, next"},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.getData}}):e._e()],1)},l=[],c={render:r,staticRenderFns:l},d=c,u=a("VU/8"),f=n,h=u(s,d,!1,f,"data-v-7be32f36",null);t.default=h.exports}});