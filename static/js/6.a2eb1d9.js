webpackJsonp([6],{"7Zti":function(t,a,e){a=t.exports=e("FZ+f")(!1),a.push([t.i,"\n.mainbox[data-v-242b913a] {\n  background-color: #fff;\n}\n.addLabel[data-v-242b913a] {\n  padding-left: 30px;\n  display: inline-block;\n  width: 100px;\n}\n.addInput[data-v-242b913a] {\n  width: 200px;\n}\n.el-dialog div[data-v-242b913a] {\n  padding-bottom: 10px;\n}\n",""])},E9u2:function(t,a,e){"use strict";function n(t){e("MDIz")}Object.defineProperty(a,"__esModule",{value:!0});var d=e("/W+i"),o=e("r4Fr"),l=e("N28j"),s={data:function(){return{roleList:[],managerList:[],interfaceList:[],addVisible:!1,modVisible:!1,addAccount:"",addPassword:"",addRemark:"",addRoleId:[],modAccount:"",modPassword:"",modAdminId:[],modRoleId:[],modManagername:"",ManagerId:[],addInterface:[],whatIsHisMenu:[],whatIsHisInterface:[],checked:[],currentPage:Number(this.$route.query.pageNum)||1,pageSize:1,modulars:l.a}},methods:{modularFilter:function(t){var a=[],e=[];a=t.split(",").map(Number);this.modulars.forEach(function(t){t.children.forEach(function(n){if(-1===a.indexOf(n.id))return!1;-1===e.indexOf(t.label)&&e.push(t.label)})});return console.log("hhh"),e.join(",")},addOpen:function(t){this.addVisible=!0},addClose:function(){this.addVisible=!1},addAccept:function(){var t=this,a={account:this.addAccount,password:Object(d.a)(this.addPassword),remark:this.addRemark,roleId:this.addRoleId};o.a.addManagers(a).then(function(a){t.getData()}),this.addVisible=!1,this.addAccount="",this.addPassword="",this.addRemark="",this.addRoleId=""},modOpen:function(t){this.modVisible=!0,this.modAccount=t.account,this.modRoleId=t.roleId,this.modAdminId=t.adminId},modClose:function(){this.modVisible=!1},modAccept:function(){var t=this,a={adminId:this.modAdminId,account:this.modAccount,password:Object(d.a)(this.modPassword),roleId:this.modRoleId};o.a.modManagers(a).then(function(t){return console.log(t)}),this.$nextTick(function(){t.getData()}),this.modVisible=!1,this.modPassword=""},del:function(t){var a=this;console.log(t);var e={adminId:Number(t.adminId)};o.a.delManagers(e).then(function(t){return console.log(t)}),this.$nextTick(function(){a.getData()})},getData:function(){var t=this;o.a.getRolelist().then(function(a){return t.roleList=a.data.list});var a={pageNum:this.currentPage};o.a.getManagers(a).then(function(a){t.managerList=a.list,t.pageSize=a.totalPage,t.$router.replace({query:{pageNum:t.currentPage}})})},reflash:function(){this.getData()}},created:function(){this.getData()}},i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"mainbox"},[e("span",[t._v("管理员列表")]),t._v(" "),e("el-button",{on:{click:function(a){return t.addOpen(0)}}},[t._v("新增")]),t._v(" "),e("el-button",{on:{click:t.reflash}},[t._v("刷新")]),t._v(" "),e("el-table",{attrs:{data:t.managerList}},[e("el-table-column",{attrs:{label:"帐号编号",prop:"adminId",width:"50px"}}),t._v(" "),e("el-table-column",{attrs:{label:"角色编号",prop:"roleId",width:"50px"}}),t._v(" "),e("el-table-column",{attrs:{label:"用户名",prop:"roleName",width:"100px"}}),t._v(" "),e("el-table-column",{attrs:{label:"模块权限"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(t._s(t.modularFilter(a.row.modulars)))]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"备注",prop:"remark",width:"100px"}}),t._v(" "),e("el-table-column",{attrs:{label:"创建日期"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(t._s(t._f("formatDate")(a.row.addTime)))]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.modOpen(a.row)}}},[t._v("编辑")]),t._v(" "),e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.del(a.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),e("el-dialog",{attrs:{visible:t.addVisible,center:"",title:"新增",width:"30%"},on:{"update:visible":function(a){t.addVisible=a}}},[e("div",[e("span",{staticClass:"addLabel"},[t._v("帐号")]),t._v(" "),e("el-input",{staticClass:"addInput",model:{value:t.addAccount,callback:function(a){t.addAccount=a},expression:"addAccount"}})],1),t._v(" "),e("div",[e("span",{staticClass:"addLabel"},[t._v("密码")]),t._v(" "),e("el-input",{staticClass:"addInput",attrs:{"show-password":""},model:{value:t.addPassword,callback:function(a){t.addPassword=a},expression:"addPassword"}})],1),t._v(" "),e("div",[e("span",{staticClass:"addLabel"},[t._v("备注")]),t._v(" "),e("el-input",{staticClass:"addInput",model:{value:t.addRemark,callback:function(a){t.addRemark=a},expression:"addRemark"}})],1),t._v(" "),e("div",[e("span",{staticClass:"addLabel"},[t._v("相关角色")]),t._v(" "),e("el-select",{staticClass:"addInput",attrs:{placeholder:"请选择"},model:{value:t.addRoleId,callback:function(a){t.addRoleId=a},expression:"addRoleId"}},t._l(t.roleList,function(t){return e("el-option",{key:t.adminId,attrs:{disabled:"超级管理员"===t.roleName,label:t.roleName,value:t.roleId}})}),1)],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){return t.addClose()}}},[t._v("关闭")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.addAccept()}}},[t._v("新增")])],1)]),t._v(" "),e("el-dialog",{attrs:{visible:t.modVisible,center:"",title:"编辑",width:"30%"},on:{"update:visible":function(a){t.modVisible=a}}},[e("div",[e("span",{staticClass:"addLabel"},[t._v("帐号")]),t._v(" "),e("el-input",{staticClass:"addInput",model:{value:t.modAccount,callback:function(a){t.modAccount=a},expression:"modAccount"}})],1),t._v(" "),e("div",[e("span",{staticClass:"addLabel"},[t._v("密码")]),t._v(" "),e("el-input",{staticClass:"addInput",attrs:{"show-password":""},model:{value:t.modPassword,callback:function(a){t.modPassword=a},expression:"modPassword"}})],1),t._v(" "),e("div",[e("span",{staticClass:"addLabel"},[t._v("相关角色")]),t._v(" "),e("el-select",{staticClass:"addInput",attrs:{placeholder:"请选择"},model:{value:t.modRoleId,callback:function(a){t.modRoleId=a},expression:"modRoleId"}},t._l(t.roleList,function(t){return e("el-option",{key:t.adminId,attrs:{disabled:"超级管理员"===t.roleName,label:t.roleName,value:t.roleId}})}),1)],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){return t.modClose()}}},[t._v("关闭")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.modAccept()}}},[t._v("修改")])],1)]),t._v(" "),0!=t.managerList.length?e("el-pagination",{attrs:{"current-page":t.currentPage,"page-count":t.pageSize,background:"",layout:"prev, pager, next"},on:{"update:currentPage":function(a){t.currentPage=a},"update:current-page":function(a){t.currentPage=a},"current-change":t.getData}}):t._e()],1)},r=[],c={render:i,staticRenderFns:r},u=c,m=e("VU/8"),p=n,v=m(s,u,!1,p,"data-v-242b913a",null);a.default=v.exports},MDIz:function(t,a,e){var n=e("7Zti");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e("rjj0")("2a28dc44",n,!0,{})}});